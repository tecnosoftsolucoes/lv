$((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),window.matchMedia("(min-width: 760px)").matches||$("#navbarDepartamentos").removeClass("btn-group").addClass("btn-group-vertical");const replaceSpecialChars=str=>str.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/([^\w]+|\s+)/g,"-").replace(/\-\-+/g,"-").replace(/(^-+|-+$)/,"");function montaItem(cfg,item){html="",1==cfg.GUEST?html+='<a class="float-right text-danger btn btn-lg btn-link mdi mdi-heart-outline" href="/login"></a>':0==item.DESEJO?html+='<button class="float-right text-danger btn btn-lg btn-link listadesejos mdi mdi-heart-outline" value="'+item.ID_PROD+'"></button>':html+='<button class="float-right text-danger btn btn-lg btn-link listadesejos mdi mdi-heart" value="'+item.ID_PROD+'"></button>';var descricao=replaceSpecialChars(item.DESCRICAO);if(html+='<a href="/produtos/detalhes/'+item.ID_PROD+"/"+descricao+'" class="card-link text-secondary">',null!=item.ID_SELO&&(html+='<div class="LoadSelo"><img class="selo position-absolute" src="" id="sel'+item.ID_SELO+'" style=""></div>'),item.IMAGENS>0?""==item.ST?(html+='<div class="LoadImage">',html+='<div class="d-flex justify-content-center spinner"><div class="spinner-border spinner-border-sm" role="status"><span class="sr-only">Carregando...</span></div></div>',html+='<img class="card-img-top" id="'+item.ID_IMG+'" src="">',html+="</div>"):html+='<img class="card-img-top" id="'+item.ID_IMG+'" src="'+item.ST+'" alt="'+item.DESCRICAO+'">':html+='<img class="card-img-top" id="" src="/img/notfound.jpg" alt="'+item.DESCRICAO+'">',1==cfg.EXIBIR_COD_PROD&&(html+='<div class="codigo-prod text-center"> <span class="font-weight-bold my-1 small">'+item.CODIGO+"</span> </div>"),html+='<div class="descricao"><p class="text-center descricao" style="text-transform: capitalize"><small>'+item.DESCRICAO+"</small></p></div>",1==cfg.CATALOGO||(1!==cfg.EXIB_VALOR_APENAS_USUARIO||1!=cfg.GUEST&&1!=cfg.BLOQUEADO?(1==cfg.DEST_PROMO?""!=item.PROMOCAO&&item.PROMOCAO<item.PRECOVENDA?html+='<div class="preco-promocao TS_JS"><h6 class="text-center bg-dark text-white ts-promo-de" style="margin-bottom: 0;"><small>De: </small><span style="text-decoration: line-through;">R$'+item.PRECOVENDA+'</span></h6><h3 class="text-center bg-warning text-dark ts-promo-por"><small>Por:</small>R$ '+item.PROMOCAO+"</span></h3></div>":(html+='<h6 class="text-center bg-transparent text-white my-1" style="margin-bottom: 0">.</h6>',html+='<div class="text-center"><small><strong class="h6 align-center">R$ </strong></small><span class="h3">'+item.PRECOVENDA+"</span></div>"):html+='<h3 class="text-center">R$ '+item.PRECOVENDA+"</h3>",""!=item.PLANO&&(html+='<h4 class="small text-center descricaoplano">'+item.PLANO+"</h4>")):html+='<h6 class="text-center"><small>Valor disponível após Autenticação</small></h6>'),html+="</a>",1==cfg.CATALOGO)html+='<div class="row mx-3 mb-1 btComprarHabilitado">',html+='<button id="'+item.ID_PROD+'" class="col-xs-12 btn btn-block btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' comprar" value="'+item.UNID_VENDA+'">Adicionar <span id="icone'+item.ID_PROD+'" class="mdi mdi-'+cfg.CHECKOUT_ICON_CLASS_ADD+'"></span></Button>',html+="</div>";else if(item.KIT>0)html+='<a class="ts-detal-kit btn btn-block btn mdi mdi-information'+cfg.PESQ_BUTTON_ADICIONADO+' " href="/produtos/detalhes/'+item.ID_PROD+"/"+descricao+'"> Detalhes</a>';else if(1==cfg.PROD_SEM_ESTOQUE&&2==item.DISPONIVEL&&0==cfg.EST_FAB_HABILITAR||1==cfg.PROD_SEM_ESTOQUE&&2==item.DISPONIVEL&&1==cfg.EST_FAB_HABILITAR&&0==item.HAB_EST_FAB){cfg.EST_EXIB>1&&(html+='<div class="text-center"><label>sem estoque</label></div>');var indisponivel=$("#htmlindisponivel").val();html+=indisponivel}else{if(cfg.EST_EXIB>1){if(html+='<div class="text-center"><label>',1==cfg.EST_FAB_HABILITAR&&1==item.HAB_EST_FAB)html+='<span class="text-danger"> </span>';else switch(cfg.EST_EXIB){case 2:html+="Estoque: "+item.ESTOQUE;break;case 3:item.ESTOQUE>item.MINIMO?html+="Estoque: "+item.ESTOQUE:html+='<span class="text-danger">Só resta'+(item.ESTOQUE>=2?"m ":" ")+item.ESTOQUE+" unidade"+(item.ESTOQUE>=2?"s":"")+"</span>";break;case 4:item.ESTOQUE>.75*item.MINIMO?html+="Estoque: "+item.ESTOQUE:html+='<span class="text-danger">Só resta'+(item.ESTOQUE>=2?"m ":" ")+item.ESTOQUE+" unidade"+(item.ESTOQUE>=2?"s":"")+"</span>";break;case 5:item.ESTOQUE>.5*item.MINIMO?html+="Estoque: "+item.ESTOQUE:html+='<span class="text-danger">Só resta'+(item.ESTOQUE>=2?"m ":" ")+item.ESTOQUE+" unidade"+(item.ESTOQUE>=2?"s":"")+"</span>"}html+="</label></div>"}if(cfg.PESQ_EXIB_BOT_ENV_CESTA>=1){if(html+='<div class="mt-1 divbtComprar mx-1 mx-md-2 mx-xl-3  '+(1==cfg.OCULTAR_BT_COMPRAR?"invisible":"")+'">',1==cfg.EXIB_COMBO_QTDE){for(html+='<div class="mx-md-3 mx-1 mr-0">    <div class="row mb-1 btn-group btn-group-sm btn-block" role="group" aria-label="Adicionar por quantidade">       <button id="ec'+item.ID_PROD+'" class="col-xs-12 btn btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' btn-sm enviarcesta" value="'+item.UNID_VENDA+'">Adicionar           <span id="icone'+item.ID_PROD+'" class="mdi mdi-'+cfg.CHECKOUT_ICON_CLASS_ADD+'"></span>       </Button>       <div class="btn-group dropup" role="group">           <button id="grpenviarcesta'+item.ID_PROD+'" type="button" class="btn btn-sm btn-block btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' grpenviarcesta dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>           <div class="dropdown-menu" aria-labelledby="Adicionar">',$i=0;$i<6&&!(1==cfg.PROD_SEM_ESTOQUE&&item.EST<($i+1)*item.UNID_VENDA);$i++)html+='<button class="dropdown-item itemenviarcesta" id="ec'+item.ID_PROD+'" value="'+($i+1)*item.UNID_VENDA+'">'+($i+1)*item.UNID_VENDA+"</button>";html+="           </div>       </div>   </div></div>"}else html+='<div class=" btComprarHabilitado">   <button id="ec'+item.ID_PROD+'" class="btn btn-block btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' enviarcesta" value="'+item.UNID_VENDA+'">Adicionar       <span id="icone'+item.ID_PROD+'" class="mdi mdi-'+cfg.CHECKOUT_ICON_CLASS_ADD+'"></span>   </Button></div>';html+="</div>"}if(1==cfg.PESQ_EXIB_BOT_COMPRAR){if(html+='<div class="divbtComprar mx-1 mx-md-2 mx-xl-3 '+(1==cfg.OCULTAR_BT_COMPRAR?"invisible":"")+'">',0==cfg.PESQ_EXIB_BOT_ENV_CESTA&&1==cfg.EXIB_COMBO_QTDE){for(html+='<div class="mx-md-3 mx-1 mr-0">   <div class="row mb-1 btn-group btn-group-sm btn-block" role="group" aria-label="Adicionar por quantidade">       <button id="'+item.ID_PROD+'" class="col-xs-12 btn btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' btn-sm comprar" value="'+item.UNID_VENDA+'">Comprar           <span id="icone'+item.ID_PROD+'" class="mdi mdi-'+cfg.CHECKOUT_ICON_CLASS_ADD+'"></span>       </Button>       <div class="btn-group dropup" role="group">           <button id="grpComprar'+item.ID_PROD+'" class="btn btn-sm btn-block btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' grpComprar dropdown-toggle"                type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static" >           </button>           <div class="dropdown-menu dropdown-menu-right p-0 ts-dropdown-menu" aria-labelledby="comprar">',$i=0;$i<6&&!(1==cfg.PROD_SEM_ESTOQUE&&parseInt(item.EST)<parseInt(($i+1)*item.UNID_VENDA));$i++)html+='   <button class="dropdown-item itemcomprar text-right" id="'+item.ID_PROD+'" value="'+($i+1)*item.UNID_VENDA+'">'+($i+1)*item.UNID_VENDA+"</button>";1==item.FRACIONAR&&(html+='          <div class="dropdown-divider"></div>             <div class="px-2">                 <label class="small p-6 m-0">Digite a quantidade:</label>                 <div class="input-group mb-3">                     <input type="number" class="form-control text-right" id="qtdfrac'+item.ID_PROD+'" name="qtdeFrac"                          min="1" max="'+item.ESTOQUE+'" value="'+(item.ESTOQUE<1*item.UNID_VENDA?item.ESTOQUE:1*item.UNID_VENDA)+'">                     <div class="input-group-append">                         <button type="button" class="btn btn-success confirmQtdFrac" value="'+item.ID_PROD+'">                             <i class="mdi mdi-chevron-right"></i>                         </Button>                     </div>                 </div>             </div>'),html+="           </div>       </div>   </div></div>"}else html+='<div class="btComprarHabilitado">',html+='<button id="'+item.ID_PROD+'" class="btn btn-block btn'+cfg.BUTTON_CLASS+cfg.PESQ_BUTTON_COMPRAR+' comprar" value="'+item.UNID_VENDA+'">Comprar <span id="icone'+item.ID_PROD+'" class="mdi mdi-'+cfg.CHECKOUT_ICON_CLASS_ADD+'"></span></Button>',html+="</div>";html+="</div>"}}return html}function GradeItens(data){html='<div class="row">';for(var i=0;i<data[1][0].length;i++)html+='<div class="col-6 mt-2 col-sm-3 px-1">',html+='<div class="destacaborda pesquisa-prod">',html+=montaItem(data[0],data[1][0][i]),html+="</div>",html+="</div>",(i+1)%4==0&&(html+='</div><div class="row">');return html+="</div>",html}function MontaGradeItens(data){$("#pesquisaProduto").html(""),0==data[1].length?html='<div class="alert alert-info"><h4>Nenhum produto encontrado!</h4></div>':(html=GradeItens(data),data[1][0].length==data[0].REGISTROS_POR_CONSULTA&&(html+='<hr id="hrMostrarMais">',html+='<div class="row" id="mostrarMais">',html+='<div class="col-xs-12 col-sm-6 offset-sm-3">',html+='<button class="mostrarMais btn btn-block btn'+data[0].PESQ_CLASS+'" id="1" >Ver Mais</a>',html+="</div>",html+="</div>")),$("#pesquisaProduto").html(html),VerificaItensComprados(),$body.removeClass("loading"),CarregaImagensProdutos()}function IncrementaGradeItens(data){$("#mostrarMais").remove(),$("#hrMostrarMais").remove(),data[1].length>0&&(html=GradeItens(data),data[1][0].length==data[0].REGISTROS_POR_CONSULTA&&(html+='<hr id="hrMostrarMais">',html+='<div class="row" id="mostrarMais">',html+='<div class="col-xs-12 col-sm-6 offset-sm-3">',html+='<button class="mostrarMais btn btn-block btn'+data[0].PESQ_CLASS+'" id="'+data[0].PAGINA+'" >Ver Mais</a>',html+="</div>",html+="</div>")),$("#pesquisaProduto").append(html),VerificaItensComprados(),$body.removeClass("loading"),CarregaImagensProdutos()}function BuscaImagem(id,$img,$spinner){if(""!=id){var busca=$.get("/produtos/imagempesquisa/"+id);busca.done((function(data){$spinner.remove(),""!=data?$img.attr("src",data):$img.attr("src","/img/notfound.jpg")})),busca.fail((function(data){$spinner.remove(),$img.attr("src","/img/notfound.jpg")}))}}function BuscaImagemCor(id,img,spinner){if(""!=id){var busca=$.get("/cor/imagem/"+id);busca.done((function(data){spinner.remove(),""!=data?img.attr("src",data):img.attr("src","/img/notfound.jpg")})),busca.fail((function(data){spinner.remove(),img.attr("src","/img/notfound.jpg")}))}}function CarregaImagensProdutos(){var LoadImagens=$(".LoadImage");$(LoadImagens).each((function(pos,registro){var $img=$(registro).find("img"),id=$img.attr("id"),$spinner=$(registro).find(".spinner");""!=id&&BuscaImagem(id,$img,$spinner)}))}function CarregaImagemCores(){var LoadCor=$(".LoadCor");$(LoadCor).each((function(pos,registro){var img=$(registro).find("img"),id=img.attr("id").substring(3),spinner=$(registro).find(".spinner-grow");""!=id&&BuscaImagemCor(id,img,spinner)}))}function BuscaImagemSelo(id,img){if(""!=id){var busca=$.get("/produtos/imagemselo/"+id);busca.done((function(data){""!=data?img.attr("src",data):img.attr("src","/img/notfound.jpg")})),busca.fail((function(data){img.attr("src","/img/notfound.jpg")}))}}function CarregaImagemSelos(){var LoadSelo=$(".LoadSelo");$(LoadSelo).each((function(pos,registro){var img=$(registro).find("img"),id=img.attr("id").substring(3);null!=id&&BuscaImagemSelo(id,img)}))}function BuscaImagemNormal(id,$img,$spinner){var busca=$.get("/produtos/imagemnormal/"+id);busca.done((function(data){""!=data?$img.attr("src",data):$img.attr("src","/img/notfound.jpg")})),busca.fail((function(data){$img.attr("src","/img/notfound.jpg")}))}function CarregaImagensNormalProdutos(){var LoadImagens=$(".LoadImageNormal");$(LoadImagens).each((function(pos,registro){var $img=$(registro).find("img"),id=$img.attr("id");""!=id&&BuscaImagemNormal(id,$img)}))}function VerificaItensComprados(){if(1==$("#btComprarHabilitado").val()){var classes=$.get("/cesta/classebotoes"),classeCompra="-success",classeAdicionado="-primary";classes.done((function(datac){var cesta;classeCompra="btn"+datac.BUTTON_CLASS+datac.PESQ_BUTTON_COMPRAR,classeAdicionado="btn"+datac.BUTTON_CLASS+datac.PESQ_BUTTON_ADICIONADO,classeIcone=datac.CHECKOUT_ICON_CLASS,$.get("/cesta/itens").done((function(data){for(var i=0;i<data.length;i++)$("#"+data[i]+".comprar").removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+classeIcone+'"></span>'),$("#"+data[i]+".adicionado").removeClass(classeCompra).addClass(classeAdicionado),1==datac.EXIB_COMBO_QTDE&&($("#grpComprar"+data[i]+".grpComprar").removeClass(classeCompra).addClass(classeAdicionado),$("#"+data[i]+".itemcomprar").removeClass("itemcomprar").addClass("adicionado"))}))}))}}function atualizaFrete(ENTREGA,ID_FRETE){var html="";for(ENTREGA[0].length>0&&(-999==ENTREGA[0][0].ValorGratis?$("#faltaGratis").html(""):$("#faltaGratis").html('<strong class="text-danger"><span class="h4 mdi mdi-alert-decagram-outline"></span> Falta R$ '+ENTREGA[0][0].ValorGratis+" para frete gratis!</strong>")),i=0;i<ENTREGA[1].length;i++)html+='<div class="row">    <div class="col-sm-8">        <div class="form-check">           <div class="opcaofrete">               <input class="form-check-input frete-selecionado" type="radio" name="frete" id="'+ENTREGA[1][i].ID+'" value="'+ENTREGA[1][i].VALOR+'"'+(0==i?"checked":"")+'>               <input class="frete-descricao" type="hidden" value="'+ENTREGA[1][i].DESCRICAO+'"/>               <label class="form-check-label small" for="'+ENTREGA[1][i].ID+'" >'+ENTREGA[1][i].DESCRICAO+'<span class="text-danger">'+(""==ENTREGA[1][i].PRAZO?"":" ("+ENTREGA[1][i].PRAZO+")")+'</span></label>           </div>        </div>    </div>    <label class="col-sm-4 text-right font-weight-bold" id="lbl'+ENTREGA[1][i].ID+'"> <small class="text-weight-normal" style="font-size:10px">R$</small> '+ENTREGA[1][i].VALOR+"</label></div>";$("#listaopcoesfrete").html(html)}function formataNumero(valor,digitos){return parseFloat(valor).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function atualizaResumoPagamento(pag,total){var html="";for(i=0;i<pag.length;i++)financeiro=(100+Number(pag[i].FINANCEIRO))/100,html+='<span class="ts-resumo-pagto-item">'+pag[i].DESCRICAO+(pag[i].PARCELAS>1?" "+pag[i].PARCELAS+" x R$ ":" R$ ")+formataNumero(financeiro*total/pag[i].PARCELAS)+(pag[i].PARC_MINIMA>0&&financeiro*total/pag[i].PARCELAS<pag[i].PARC_MINIMA?"<i> Parc. Mínima R$ "+pag[i].PARC_MINIMA+"</i>":"")+"</span><br>";$("#resumopagamento").html(html)}function atualizaTotaisResumo(obj,data){$("#qtd"+obj.val()).text(data.QTDE),$("#subtotal").html("<strong>"+data.SUBTOTAL+"</strong>"),$("#frete").text(data.FRETE),$("#total").html("<strong>"+data.TOTAL+"</strong>"),data.ITENS>0?$("#totalitens").text(data.ITENS):$("#totalitens").text(""),3!=$("#PROD_SEM_ESTOQUE").val()&&(data.ALTERADO>=$("#est"+obj.val()).val()?$("#incQtd"+obj.val()).attr("disabled",!0):$("#incQtd"+obj.val()).attr("disabled",!1),data.ALTERADO<=$("#est"+obj.val()).val()&&$("#indisp"+obj.val()).remove(),0==$(".indisponivel").length&&0==$(".bloqueado").length&&$("#divConcluir").html('<a href="/cesta/concluir" class="btn btn-success btn-block mdi mdi-credit-card-check-outline"> CONCLUIR PEDIDO</a>')),1==data.ALTERADO?$("#decQtd"+obj.val()).attr("disabled",!0):$("#decQtd"+obj.val()).attr("disabled",!1),atualizaResumoPagamento(data.PAGAMENTO,data.VALTOTAL)}function CarregaDescricaoDetalhada(){if(1==$("#descricaodetalhada").length){var busca=$.get("/produtos/descricaodetalhada/"+$("#ID_PROD").val());busca.done((function(data){$("#descricaodetalhada").html(data)})),busca.fail((function(data){$("#descricaodetalhada").html("")}))}}function CarregaInformacaoComplementar(){if(1==$("#informacaocomplementar").length){var busca=$.get("/produtos/informacaocomplementar/"+$("#ID_PROD").val());busca.done((function(data){$("#informacaocomplementar").html(data)})),busca.fail((function(data){$("#informacaocomplementar").html("")}))}}function CarregaItensVitrine(){if(1==$("#sliderVitrine").length){var busca=$.get("/vitrine");busca.done((function(data){html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#spinnerVitrine").remove(),$("#sliderVitrine").html(html),$(".vitrine").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()})),busca.fail((function data(){$("#spinnerVitrine").remove()}))}}function CarregaItensMaisVendidos(){if(1==$("#sliderMaisVendidos").length){var busca=$.get("/maisVendidos");busca.done((function(data){html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#spinnerMaisVendidos").remove(),$("#sliderMaisVendidos").html(html),$(".maisvendidos").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()})),busca.fail((function data(){$("#spinnerMaisVendidos").remove()}))}}function CarregaItensPatrocinados(){if(1==$("#sliderPatrocinados").length){var busca=$.get("/patrocinados");busca.done((function(data){html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#spinnerPatrocinados").remove(),$("#sliderPatrocinados").html(html),$(".patrocinados").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()})),busca.fail((function data(){$("#spinnerPatrocinados").remove()}))}}function CarregaItensMaisVendidosCategoria(){if(1==$("#sliderMaisVendidosCategoria").length){var busca=$.get("/produtos/maisvendidos/"+$("#ID_SET").val());busca.done((function(data){if(data[1][0].length>0){$("#produtosmaisvendidos").html(data[0].DET_MAIS),html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#spinnerMaisVendidos").remove(),$("#sliderMaisVendidosCategoria").html(html),$(".maisvendidos").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()}else $("#spinnerMaisVendidos").remove(),$("#sliderMaisVendidos").html("")})),busca.fail((function data(){$("#spinnerMaisVendidos").remove()}))}}function CarregaItensPatrocinadosCategoria(){if(1==$("#sliderPatrocinadosCategoria").length){var busca=$.get("/produtos/patrocinados/"+$("#ID_SET").val());busca.done((function(data){if(data[1][0].length>0){$("#produtospatrocinados").html(data[0].DET_PATROC),html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#spinnerPatrocinados").remove(),$("#sliderPatrocinadosCategoria").html(html),$(".patrocinados").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()}else $("#spinnerPatrocinados").remove(),$("#sliderPatrocinados").html("")})),busca.fail((function data(){$("#spinnerPatrocinados").remove()}))}}function ProdutosRelacionados(){var busca;1==$("#sliderRelacionados").length&&$.get("/produtos/relacionados/"+$("#ID_PROD").val()).done((function(data){if(data[1][0].length>0){$("#produtosRelacionados").html(data[0].DET_RELAC),html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#sliderRelacionados").html(html),$(".relacionados").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()}}))}function ProdutosDestaques(){var busca;1==$("#sliderDestaques").length&&$.get("/produtos/destaques/"+$("#ID_PROD").val()).done((function(data){if(data[1][0].length>0){$("#produtosDestaques").html(data[0].DET_DEST),html="";for(var i=0;i<data[1][0].length;i++)html+='<div class="destacabordaVitrine">',html+=montaItem(data[0],data[1][0][i]),html+=" </div>";$("#sliderDestaques").html(html),$(".destaques").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),CarregaImagensProdutos(),CarregaImagemSelos()}}))}function CorrigeRodape(){var heihgtRodape=$("#rodape").height();heihgtRodape>390&&$("#conteudo").css("padding-bottom",heihgtRodape)}$(document).on("click",".filtroDescAdicional",(function(){var dados;$.get("/produtos/filtroDescAdicional/"+$(this).attr("name")).done((function(data){MontaGradeItens(data)}))})),$(document).on("click",".filtroFabricante",(function(){var dados;$.get("/produtos/filtraFabricante/"+$(this).attr("name")).done((function(data){MontaGradeItens(data)}))})),$(document).on("click",".filtroAdicional",(function(){var dados;$.get("/produtos/filtroAdicional/"+$(this).attr("name")).done((function(data){MontaGradeItens(data)}))})),$(document.body).on("click",".mostrarMais",(function(){var pagina=$(this).attr("id"),dados;pagina++,$.get("/produtos/mostrarmais/"+pagina).done((function(data){IncrementaGradeItens(data)}))})),$(document).on("click",".alterarTamanho",(function(){$("#ID_PROD").val($(this).val()),$("#labelTamanho").html("Tamanho: "+$(this).html())})),$(".dropdown-menu a.dropdown-toggle").on("click",(function(e){var $subMenu;return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",(function(e){$(".dropdown-submenu .show").removeClass("show")})),!1})),CarregaImagensProdutos(),CarregaImagemCores(),CarregaImagemSelos(),CarregaImagensNormalProdutos(),$(document).on("click",".imagegaleriaclick",(function(){var $img=$("#previewGaleria").find("img"),id;BuscaImagemNormal($(this).find("img").attr("id"),$img)})),$(document).on("click",".imagePreviewClick",(function(){$("#galeriaModal").modal("show"),$(".galeriaModal").slick("slickGoTo",0)})),$(document).on("click",".listadesejos",(function(){let sit=$(this).text(),obj=$(this);var add,del;"heart-outline"===sit?$.get("/listadesejos/add/"+obj.val()).done((function(data){obj.html('<i class="mdi mdi-heart"></i>')})):$.get("/listadesejos/deljq/"+obj.val()).done((function(data){obj.html('<i class="mdi mdi-heart-outline"></i>')}))})),$(".alteraQuantidade").on("change",(function(){$(this).removeClass("is-invalid")})),$(document).on("submit",".excluirItemCesta",(function(e){id=$(this).attr("id"),$.get("/cesta/excluirdados/"+id).done((function(data){1==$("#analytics_OK").length&&gtag("event","remove_from_cart",{items:[{id:data.ID_PROD,name:data.DESCRICAO,list_name:"Pesquisa",brand:data.FABRICANTE,category:data.SETOR,variant:"",list_position:1,quantity:data.QUANTIDADE,price:data.UNITARIO}]})}))})),$(document.body).on("click",".enviarcesta, .itemenviarcesta",(function(){var nome=$(this).attr("id").substring(2),obj=$("#"+nome),qtde=parseInt(obj.val()),estoque=parseInt($("#altqtd"+nome).attr("max")),lancar=!0;if($("#altqtd"+nome).length>=1&&qtde>estoque&&($("#altqtd"+nome).addClass("is-invalid"),lancar=!1),lancar){var sit1=obj.hasClass("comprar"),sit2=obj.hasClass("itemcomprar"),adicionar;$.post("/cesta/adicionar",{id:nome,qtde:obj.val()}).done((function(data){if(1==$("#analytics_OK").length&&gtag("event","add_to_cart",{items:[{id:data.ID_PROD,name:data.DESCRICAO,list_name:"Pesquisa",brand:data.FABRICANTE,category:data.SETOR,variant:"",list_position:1,quantity:data.QUANTIDADE,price:data.UNITARIO}]}),(sit1||sit2)&&(obj.removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),1==data.EXIB_COMBO_QTDE?($("#grpComprar"+obj.attr("id")).removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),$("#"+obj.attr("id")).removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+data.CHECKOUT_ICON_CLASS+'"></span>'),$("#"+obj.attr("id")).removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),obj.removeClass("itemcomprar").addClass("adicionado")):obj.removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+data.CHECKOUT_ICON_CLASS+'"></span>')),data.ITENS>0?$("#totalitens").text(data.ITENS):$("#totalitens").text(""),1==data.REDIREC_COMPRA)$(location).attr("href","/cesta/resumo");else{if($("#cesta"+data.ITEM.ID_PROD).length>=1){var html='<div class="col-2"><img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/mini/"+data.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+data.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+data.item.UNITARIO+"</label></div><hr>";$("#cesta"+data.ITEM.ID_PROD).html(html)}else{var html='<div id="cesta'+data.ITEM.ID_PROD+'" class="row"><div class="col-2"><img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/mini/"+data.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+data.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.UNITARIO+"</label></div></div><hr>";$("#modalItens").append(html)}$("#cestaTotal").html("<strong>Total R$ "+data.TOTAL+"</strong>"),$("#modalContinuarComprando").modal("show")}}))}})),$(document.body).on("click",".confirmQtdeCard, .confirmQtdFrac",(function(){var lancar=!0,adicionar;if($(this).hasClass("confirmQtdFrac"))var obj=$("#qtdfrac"+$(this).val()),ID_PROD=$(this).val(),qtd=parseInt(obj.val()),estoque=parseInt(obj.attr("max")),sit1=obj.hasClass("comprar"),sit2=obj.hasClass("itemcomprar");else{var obj,ID_PROD=(obj=$("#"+$("#idQtdeCard").val())).attr("id"),qtd=parseInt($("#qtdeCard").val()),estoque=parseInt($("#altqtd"+$("#idQtdeCard").val()).attr("max")),sit1=obj.hasClass("comprar"),sit2=obj.hasClass("itemcomprar");$("#digQtdeCard").modal("hide"),$("#altqtd"+obj.attr("id")).length>=1&&qtd>estoque&&($("#altqtd"+obj.attr("id")).addClass("is-invalid"),lancar=!1)}lancar&&$.post("/cesta/adicionar",{id:ID_PROD,qtde:qtd}).done((function(data){if(1==$("#analytics_OK").length&&gtag("event","add_to_cart",{items:[{id:data.ID_PROD,name:data.DESCRICAO,list_name:"Pesquisa",brand:data.FABRICANTE,category:data.SETOR,variant:"",list_position:1,quantity:data.QUANTIDADE,price:data.UNITARIO}]}),(sit1||sit2)&&(obj.removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),1==data.EXIB_COMBO_QTDE?($("#grpComprar"+ID_PROD).removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),$("#"+ID_PROD).removeClass("comprar").addClass("adicionado").html('Adicionado  <span class="mdi mdi-'+data.CHECKOUT_ICON_CLASS+'"></span>'),$("#"+ID_PROD).removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),obj.removeClass("itemcomprar").addClass("adicionado")):obj.removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+data.CHECKOUT_ICON_CLASS+'"></span>')),data.ITENS>0?$("#totalitens").text(data.ITENS):$("#totalitens").text(""),1==data.REDIREC_COMPRA)$(location).attr("href","/cesta/resumo");else{if($("#cesta"+data.ITEM.ID_PROD).length>=1){var html='<div class="col-2"><img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/mini/"+data.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+data.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+data.item.UNITARIO+"</label></div><hr>";$("#cesta"+data.ITEM.ID_PROD).html(html)}else{var html='<div id="cesta'+data.ITEM.ID_PROD+'" class="row"><div class="col-2"><img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/mini/"+data.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+data.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.UNITARIO+"</label></div></div><hr>";$("#modalItens").append(html)}$("#cestaTotal").html("<strong>Total R$ "+data.TOTAL+"</strong>"),$("#modalContinuarComprando").modal("show")}}))})),$(document.body).on("click",".comprar, .itemcomprar",(function(){var obj=$(this);if(1==$("#configQtdeCard").val())$("#idQtdeCard").val(obj.attr("id")),$("#qtdeCard").val("1"),$("#digQtdeCard").modal("show");else{var qtde=parseInt(obj.val()),estoque=parseInt($("#altqtd"+obj.attr("id")).attr("max")),sit1=obj.hasClass("comprar"),sit2=obj.hasClass("itemcomprar"),lancar=!0,adicionar;if($("#altqtd"+obj.attr("id")).length>=1&&qtde>estoque&&($("#altqtd"+obj.attr("id")).addClass("is-invalid"),lancar=!1),lancar)$.post("/cesta/adicionar",{id:obj.attr("id"),qtde:obj.val()}).done((function(data){if(1==$("#analytics_OK").length&&gtag("event","add_to_cart",{items:[{id:data.ID_PROD,name:data.DESCRICAO,list_name:"Pesquisa",brand:data.FABRICANTE,category:data.SETOR,variant:"",list_position:1,quantity:data.QUANTIDADE,price:data.UNITARIO}]}),(sit1||sit2)&&(obj.removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),1==data.EXIB_COMBO_QTDE?($("#grpComprar"+obj.attr("id")).removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),$("#"+obj.attr("id")).removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+data.CHECKOUT_ICON_CLASS+'"></span>'),$("#"+obj.attr("id")).removeClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_COMPRAR).addClass("btn"+data.BUTTON_CLASS+data.PESQ_BUTTON_ADICIONADO),obj.removeClass("itemcomprar").addClass("adicionado")):obj.removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+data.CHECKOUT_ICON_CLASS+'"></span>')),data.ITENS>0?$("#totalitens").text(data.ITENS):$("#totalitens").text(""),1==data.CATALOGO);else if(1==data.REDIREC_COMPRA)$(location).attr("href","/cesta/resumo");else if($("#cestaTotal").html("<strong>Total R$ "+data.TOTAL+"</strong>"),2==data.REDIREC_COMPRA){if($("#cesta"+data.ITEM.ID_PROD).length>=1){var html='<div class="col-2">';1==data.PESQ_TIPO_IMAGEM?html+='<img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/mini/"+data.ITEM.ID_IMG+'.jpg">':html+='<img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/normal/"+data.ITEM.ID_IMG+'.jpg">',html+='</div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+data.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+data.item.UNITARIO+"</label></div><hr>",$("#cesta"+data.ITEM.ID_PROD).html(html)}else{var html='<div id="cesta'+data.ITEM.ID_PROD+'" class="row"><div class="col-2">';1==data.PESQ_TIPO_IMAGEM?html+='<img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/mini/"+data.ITEM.ID_IMG+'.jpg">':html+='<img class="card-img-top"  src="/img/lojas/'+data.LOJA+"/produtos/normal/"+data.ITEM.ID_IMG+'.jpg">',html+='</div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+data.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+data.ITEM.UNITARIO+"</label></div></div><hr>",$("#modalItens").append(html)}$("#modalContinuarComprando").modal("show")}}))}})),$("#cep").keydown((function(event){$("#cep").popover("hide");var arrNumeros=["Enter","Backspace","Tab","1","2","3","4","5","6","7","8","9","0"];-1===$.inArray(event.key,arrNumeros)?event.preventDefault():9==$("#cep").val().length&&-1===$.inArray(event.key,["Enter","Backspace"])&&event.preventDefault()})),$("#cep").keyup((function(event){8!=event.which&&5==$("#cep").val().length&&$("#cep").val($("#cep").val()+"-")})),$(document).on("submit","#definirCep",(function(){9!=$("#cep").val().length&&($("#cep").popover("show"),event.preventDefault())})),$(document).on("click",".opcaofrete",(function(){var frete=$(this).find(".frete-selecionado").val(),id_frete=$(this).find(".frete-selecionado").attr("id"),descricao=$(this).find(".frete-descricao").val();$.post("/cesta/definefrete",{id:id_frete,valor:frete}).done((function(data){1==$("#analytics_OK").length&&gtag("event","set_checkout_option",{checkout_step:1,checkout_option:"Opção de Entrega",value:descricao}),$("#subtotal").html("<strong>"+data.SUBTOTAL+"</strong>"),$("#frete").text(data.FRETE),$("#valfrete").val(data.VALORFRETE),$("#total").html("<strong>"+data.TOTAL+"</strong>"),"0,00"==data.SUBTOTAL&&($(".expirada").removeClass("d-none"),$("#valprodutos").val("0"),$("#valdesconto").val("0")),$("#CART_PARCELAS").length>0&&$("#CART_PARCELAS").html(""),$("#BOL_PARCELAS").length>0&&$("#BOL_PARCELAS").html(""),atualizaResumoPagamento(data.PAGAMENTO,data.VALTOTAL)}))})),$(document.body).on("click",".incQtde",(function(){var obj=$(this),metodo;$.post("/cesta/incrementa",{id:obj.val(),qtd:1}).done((function(data){""!=data&&(atualizaTotaisResumo(obj,data),atualizaFrete(data.ENTREGA,data.ID_FRETE))}))})),$(document.body).on("click",".decQtde",(function(){var obj=$(this),metodo;"1"!=$("#qtd"+obj.val()).text()&&$.post("/cesta/decrementa",{id:obj.val(),qtd:1}).done((function(data){""!=data&&(atualizaTotaisResumo(obj,data),atualizaFrete(data.ENTREGA,data.ID_FRETE))}))})),$body=$("body"),window.addEventListener("pageshow",(function(event){var historyTraversal;(event.persisted||void 0!==window.performance&&2===window.performance.navigation.type)&&window.location.reload()})),$(document).on("mouseenter",".destacaborda",(function(){1==$("#ocultarBtComprar").val()&&$(this).children(".divbtComprar").removeClass("invisible")})),$(document).on("mouseleave",".destacaborda",(function(){1==$("#ocultarBtComprar").val()&&$(this).children(".divbtComprar").addClass("invisible")})),$(document).on("change",".alteraQuantidade",(function(){var qtde=$(this).val();$("#ec"+$(this).attr("name")).length>=1&&$("#ec"+$(this).attr("name")).val(qtde),$("#"+$(this).attr("name")).val(qtde)})),$(document).on("click",".btnPrintCatalogo",(function(){window.print()})),$(document).on("submit",".cotacaoEmail",(function(e){e.preventDefault();var email=$(this).serializeArray();return $.get("/emails/CotacaoEmail",{emailCotacao:email[2].value,textoCotacao:email[3].value}).done((function(data){})).fail((function(){})),!1})),$(document).on("click","#btSendNewsLetterInsert",(function(e){console.log("A"),e.preventDefault(),console.log("B");var formdata=$("#sendNewsLetterInsert").serializeArray();console.log("C"),$.post("/newsletter/inclusao",formdata).done((function(data){alert("Obrigado por se cadastrar!")}))})),CorrigeRodape(),ProdutosRelacionados(),ProdutosDestaques(),VerificaItensComprados(),CarregaDescricaoDetalhada(),CarregaInformacaoComplementar(),CarregaItensVitrine(),CarregaItensMaisVendidos(),CarregaItensPatrocinados(),CarregaItensMaisVendidosCategoria(),CarregaItensPatrocinadosCategoria(),$(document).on({ajaxStart:function(){$body.addClass("loading")},ajaxStop:function(){$body.removeClass("loading")}})}));