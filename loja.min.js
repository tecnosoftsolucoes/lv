$(function(){var a,b,c;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),window.matchMedia("(min-width: 760px)").matches||$("#navbarDepartamentos").removeClass("btn-group").addClass("btn-group-vertical");let g=a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/([^\w]+|\s+)/g,"-").replace(/\-\-+/g,"-").replace(/(^-+|-+$)/,"");function h(b,a){html="",1==b.GUEST?html+='<a class="float-right text-danger btn btn-lg btn-link mdi mdi-heart-outline" href="/login"></a>':0==a.DESEJO?html+='<button class="float-right text-danger btn btn-lg btn-link listadesejos mdi mdi-heart-outline" value="'+a.ID_PROD+'"></button>':html+='<button class="float-right text-danger btn btn-lg btn-link listadesejos mdi mdi-heart" value="'+a.ID_PROD+'"></button>';var c=g(a.DESCRICAO);if(html+='<a href="/produtos/detalhes/'+a.ID_PROD+"/"+c+'" class="card-link text-secondary">',null!=a.ID_SELO&&(html+='<div class="LoadSelo"><img class="selo position-absolute" src="" id="sel'+a.ID_SELO+'" style=""></div>'),a.IMAGENS>0?""==a.ST?(html+='<div class="LoadImage">',html+='<div class="d-flex justify-content-center spinner"><div class="spinner-border spinner-border-sm" role="status"><span class="sr-only">Carregando...</span></div></div>',html+='<img class="card-img-top" id="'+a.ID_IMG+'" src="">',html+="</div>"):html+='<img class="card-img-top" id="'+a.ID_IMG+'" src="'+a.ST+'" alt="'+a.DESCRICAO+'">':html+='<img class="card-img-top" id="" src="/img/notfound.jpg" alt="'+a.DESCRICAO+'">',1==b.EXIBIR_COD_PROD&&(html+='<div class="codigo-prod text-center"> <span class="font-weight-bold my-1 small">'+a.CODIGO+"</span> </div>"),html+='<div class="descricao"><p class="text-center descricao" style="text-transform: capitalize"><small>'+a.DESCRICAO+"</small></p></div>",1==b.CATALOGO||(1===b.EXIB_VALOR_APENAS_USUARIO&&(1==b.GUEST||1==b.BLOQUEADO)?html+='<h6 class="text-center"><small>Valor dispon\xedvel ap\xf3s Autentica\xe7\xe3o</small></h6>':(1==b.DEST_PROMO?""!=a.PROMOCAO&&a.PROMOCAO<a.PRECOVENDA?html+='<div class="preco-promocao TS_JS"><h6 class="text-center bg-dark text-white ts-promo-de" style="margin-bottom: 0;"><small>De: </small><span style="text-decoration: line-through;">R$'+a.PRECOVENDA+'</span></h6><h3 class="text-center bg-warning text-dark ts-promo-por"><small>Por:</small>R$ '+a.PROMOCAO+"</span></h3></div>":(html+='<h6 class="text-center bg-transparent text-white my-1" style="margin-bottom: 0">.</h6>',html+='<div class="text-center"><small><strong class="h6 align-center">R$ </strong></small><span class="h3">'+a.PRECOVENDA+"</span></div>"):html+='<h3 class="text-center">R$ '+a.PRECOVENDA+"</h3>",""!=a.PLANO&&(html+='<h4 class="small text-center descricaoplano">'+a.PLANO+"</h4>"))),html+="</a>",1==b.CATALOGO)html+='<div class="row mx-3 mb-1 btComprarHabilitado">',html+='<button id="'+a.ID_PROD+'" class="col-xs-12 btn btn-block btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' comprar" value="'+a.UNID_VENDA+'">Adicionar <span id="icone'+a.ID_PROD+'" class="mdi mdi-'+b.CHECKOUT_ICON_CLASS_ADD+'"></span></Button>',html+="</div>";else if(a.KIT>0)html+='<a class="ts-detal-kit btn btn-block btn mdi mdi-information'+b.PESQ_BUTTON_ADICIONADO+' " href="/produtos/detalhes/'+a.ID_PROD+"/"+c+'"> Detalhes</a>';else if(1==b.PROD_SEM_ESTOQUE&&2==a.DISPONIVEL&&0==b.EST_FAB_HABILITAR||1==b.PROD_SEM_ESTOQUE&&2==a.DISPONIVEL&&1==b.EST_FAB_HABILITAR&&0==a.HAB_EST_FAB){b.EST_EXIB>1&&(html+='<div class="text-center"><label>sem estoque</label></div>');var d=$("#htmlindisponivel").val();html+=d}else{if(b.EST_EXIB>1){if(html+='<div class="text-center"><label>',1==b.EST_FAB_HABILITAR&&1==a.HAB_EST_FAB)html+='<span class="text-danger">\xa0</span>';else switch(b.EST_EXIB){case 2:html+="Estoque: "+a.ESTOQUE;break;case 3:a.ESTOQUE>a.MINIMO?html+="Estoque: "+a.ESTOQUE:html+='<span class="text-danger">S\xf3 resta'+(a.ESTOQUE>=2?"m ":" ")+a.ESTOQUE+" unidade"+(a.ESTOQUE>=2?"s":"")+"</span>";break;case 4:a.ESTOQUE>.75*a.MINIMO?html+="Estoque: "+a.ESTOQUE:html+='<span class="text-danger">S\xf3 resta'+(a.ESTOQUE>=2?"m ":" ")+a.ESTOQUE+" unidade"+(a.ESTOQUE>=2?"s":"")+"</span>";break;case 5:a.ESTOQUE>.5*a.MINIMO?html+="Estoque: "+a.ESTOQUE:html+='<span class="text-danger">S\xf3 resta'+(a.ESTOQUE>=2?"m ":" ")+a.ESTOQUE+" unidade"+(a.ESTOQUE>=2?"s":"")+"</span>"}html+="</label></div>"}if(b.PESQ_EXIB_BOT_ENV_CESTA>=1){if(html+='<div class="mt-1 divbtComprar mx-1 mx-md-2 mx-xl-3  '+(1==b.OCULTAR_BT_COMPRAR?"invisible":"")+'">',1==b.EXIB_COMBO_QTDE){for(html+='<div class="mx-md-3 mx-1 mr-0">    <div class="row mb-1 btn-group btn-group-sm btn-block" role="group" aria-label="Adicionar por quantidade">       <button id="ec'+a.ID_PROD+'" class="col-xs-12 btn btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' btn-sm enviarcesta" value="'+a.UNID_VENDA+'">Adicionar           <span id="icone'+a.ID_PROD+'" class="mdi mdi-'+b.CHECKOUT_ICON_CLASS_ADD+'"></span>       </Button>       <div class="btn-group dropup" role="group">           <button id="grpenviarcesta'+a.ID_PROD+'" type="button" class="btn btn-sm btn-block btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' grpenviarcesta dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>           <div class="dropdown-menu" aria-labelledby="Adicionar">',$i=0;$i<6&&!(1==b.PROD_SEM_ESTOQUE&&a.EST<($i+1)*a.UNID_VENDA);$i++)html+='<button class="dropdown-item itemenviarcesta" id="ec'+a.ID_PROD+'" value="'+($i+1)*a.UNID_VENDA+'">'+($i+1)*a.UNID_VENDA+"</button>";html+="           </div>       </div>   </div></div>"}else html+='<div class=" btComprarHabilitado"> <div class="mb-1">   <button id="ec'+a.ID_PROD+'" class="btn btn-block btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' enviarcesta" value="'+a.UNID_VENDA+'">Adicionar       <span id="icone'+a.ID_PROD+'" class="mdi mdi-'+b.CHECKOUT_ICON_CLASS_ADD+'"></span>   </Button> </div></div>';html+="</div>"}if(1==b.PESQ_EXIB_BOT_COMPRAR){if(html+='<div class="divbtComprar mx-1 mx-md-2 mx-xl-3 '+(1==b.OCULTAR_BT_COMPRAR?"invisible":"")+'">',0==b.PESQ_EXIB_BOT_ENV_CESTA&&1==b.EXIB_COMBO_QTDE){for(html+='<div class="mx-md-3 mx-1 mr-0">   <div class="row mb-1 btn-group btn-group-sm btn-block" role="group" aria-label="Adicionar por quantidade">       <button id="'+a.ID_PROD+'" class="col-xs-12 btn btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' btn-sm comprar" value="'+a.UNID_VENDA+'">Comprar           <span id="icone'+a.ID_PROD+'" class="mdi mdi-'+b.CHECKOUT_ICON_CLASS_ADD+'"></span>       </Button>       <div class="btn-group dropup" role="group">           <button id="grpComprar'+a.ID_PROD+'" class="btn btn-sm btn-block btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' grpComprar dropdown-toggle"                type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static" >           </button>           <div class="dropdown-menu dropdown-menu-right p-0 ts-dropdown-menu" aria-labelledby="comprar">',$i=0;$i<6&&!(1==b.PROD_SEM_ESTOQUE&&parseInt(a.EST)<parseInt(($i+1)*a.UNID_VENDA));$i++)html+='   <button class="dropdown-item itemcomprar text-right" id="'+a.ID_PROD+'" value="'+($i+1)*a.UNID_VENDA+'">'+($i+1)*a.UNID_VENDA+"</button>";1==a.FRACIONAR&&(html+='          <div class="dropdown-divider"></div>             <div class="px-2">                 <label class="small p-6 m-0">Digite a quantidade:</label>                 <div class="input-group mb-3">                     <input type="number" class="form-control text-right" id="qtdfrac'+a.ID_PROD+'" name="qtdeFrac"                          min="1" max="'+a.ESTOQUE+'" value="'+(a.ESTOQUE<1*a.UNID_VENDA?a.ESTOQUE:1*a.UNID_VENDA)+'">                     <div class="input-group-append">                         <button type="button" class="btn btn-success confirmQtdFrac" value="'+a.ID_PROD+'">                             <i class="mdi mdi-chevron-right"></i>                         </Button>                     </div>                 </div>             </div>'),html+="           </div>       </div>   </div></div>"}else html+='<div class="btComprarHabilitado">',html+='  <div class="mb-1">',html+='    <button id="'+a.ID_PROD+'" class="btn btn-block btn'+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR+' comprar" value="'+a.UNID_VENDA+'">Comprar <span id="icone'+a.ID_PROD+'" class="mdi mdi-'+b.CHECKOUT_ICON_CLASS_ADD+'"></span></Button>',html+="  </div>",html+="</div>";html+="</div>"}}return html}function i(b){html='<div class="row">';for(var a=0;a<b[1][0].length;a++)html+='<div class="col-6 mt-2 col-sm-3 px-1">',html+='<div class="destacaborda pesquisa-prod">',html+=h(b[0],b[1][0][a]),html+="</div>",html+="</div>",(a+1)%4==0&&(html+='</div><div class="row">');return html+="</div>"}function j(a){$("#pesquisaProduto").html(""),0==a[1].length?html='<div class="alert alert-info"><h4>Nenhum produto encontrado!</h4></div>':(html=i(a),a[1][0].length==a[0].REGISTROS_POR_CONSULTA&&(html+='<hr id="hrMostrarMais">',html+='<div class="row" id="mostrarMais">',html+='<div class="col-xs-12 col-sm-6 offset-sm-3">',html+='<button class="mostrarMais btn btn-block btn'+a[0].PESQ_CLASS+'" id="1" >Ver Mais</a>',html+="</div>",html+="</div>")),$("#pesquisaProduto").html(html),f(),$body.removeClass("loading"),d()}function d(){var a=$(".LoadImage");$(a).each(function(e,a){var b=$(a).find("img"),c=b.attr("id"),d=$(a).find(".spinner");""!=c&&function(a,c,d){if(""!=a){var b=$.get("/produtos/imagempesquisa/"+a);b.done(function(a){d.remove(),""!=a?c.attr("src",a):c.attr("src","/img/notfound.jpg")}),b.fail(function(a){d.remove(),c.attr("src","/img/notfound.jpg")})}}(c,b,d)})}function e(){var a=$(".LoadSelo");$(a).each(function(d,c){var a=$(c).find("img"),b=a.attr("id").substring(3);null!=b&&function(a,c){if(""!=a){var b=$.get("/produtos/imagemselo/"+a);b.done(function(a){""!=a?c.attr("src",a):c.attr("src","/img/notfound.jpg")}),b.fail(function(a){c.attr("src","/img/notfound.jpg")})}}(b,a)})}function k(b,c,d){var a=$.get("/produtos/imagemnormal/"+b);a.done(function(a){""!=a?c.attr("src",a):c.attr("src","/img/notfound.jpg")}),a.fail(function(a){c.attr("src","/img/notfound.jpg")})}function f(){if(1==$("#btComprarHabilitado").val()){var a=$.get("/cesta/classebotoes"),b="-success",c="-primary";a.done(function(a){b="btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_COMPRAR,c="btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_ADICIONADO,classeIcone=a.CHECKOUT_ICON_CLASS,$.get("/cesta/itens").done(function(e){for(var d=0;d<e.length;d++)$("#"+e[d]+".comprar").removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+classeIcone+'"></span>'),$("#"+e[d]+".adicionado").removeClass(b).addClass(c),1==a.EXIB_COMBO_QTDE&&($("#grpComprar"+e[d]+".grpComprar").removeClass(b).addClass(c),$("#"+e[d]+".itemcomprar").removeClass("itemcomprar").addClass("adicionado"))})})}}function l(a,c){var b="";for(a[0].length>0&&(-999==a[0][0].ValorGratis?$("#faltaGratis").html(""):$("#faltaGratis").html('<strong class="text-danger"><span class="h4 mdi mdi-alert-decagram-outline"></span> Falta R$ '+a[0][0].ValorGratis+" para frete gratis!</strong>")),i=0;i<a[1].length;i++)b+='<div class="row">    <div class="col-sm-8">        <div class="form-check">           <div class="opcaofrete">               <input class="form-check-input frete-selecionado" type="radio" name="frete" id="'+a[1][i].ID+'" value="'+a[1][i].VALOR+'"'+(0==i?"checked":"")+'>               <input class="frete-descricao" type="hidden" value="'+a[1][i].DESCRICAO+'"/>               <label class="form-check-label small" for="'+a[1][i].ID+'" >'+a[1][i].DESCRICAO+'<span class="text-danger">'+(""==a[1][i].PRAZO?"":" ("+a[1][i].PRAZO+")")+'</span></label>           </div>        </div>    </div>    <label class="col-sm-4 text-right font-weight-bold" id="lbl'+a[1][i].ID+'"> <small class="text-weight-normal" style="font-size:10px">R$</small> '+a[1][i].VALOR+"</label></div>";$("#listaopcoesfrete").html(b)}function m(a,b){return parseFloat(a).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function n(a,b){var c="";for(i=0;i<a.length;i++)financeiro=(100+Number(a[i].FINANCEIRO))/100,c+='<span class="ts-resumo-pagto-item">'+a[i].DESCRICAO+(a[i].PARCELAS>1?" "+a[i].PARCELAS+" x R$ ":" R$ ")+m(financeiro*b/a[i].PARCELAS)+(a[i].PARC_MINIMA>0&&financeiro*b/a[i].PARCELAS<a[i].PARC_MINIMA?"<i> Parc. M\xednima R$ "+a[i].PARC_MINIMA+"</i>":"")+"</span><br>";$("#resumopagamento").html(c)}function o(b,a){$("#qtd"+b.val()).text(a.QTDE),$("#subtotal").html("<strong>"+a.SUBTOTAL+"</strong>"),$("#frete").text(a.FRETE),$("#total").html("<strong>"+a.TOTAL+"</strong>"),a.ITENS>0?$("#totalitens").text(a.ITENS):$("#totalitens").text(""),3!=$("#PROD_SEM_ESTOQUE").val()&&(a.ALTERADO>=$("#est"+b.val()).val()?$("#incQtd"+b.val()).attr("disabled",!0):$("#incQtd"+b.val()).attr("disabled",!1),a.ALTERADO<=$("#est"+b.val()).val()&&$("#indisp"+b.val()).remove(),0==$(".indisponivel").length&&0==$(".bloqueado").length&&$("#divConcluir").html('<a href="/cesta/concluir" class="btn btn-success btn-block mdi mdi-credit-card-check-outline"> CONCLUIR PEDIDO</a>')),1==a.ALTERADO?$("#decQtd"+b.val()).attr("disabled",!0):$("#decQtd"+b.val()).attr("disabled",!1),n(a.PAGAMENTO,a.VALTOTAL)}$(document).on("click",".filtroDescAdicional",function(){$.get("/produtos/filtroDescAdicional/"+$(this).attr("name")).done(function(a){j(a)})}),$(document).on("click",".filtroFabricante",function(){$.get("/produtos/filtraFabricante/"+$(this).attr("name")).done(function(a){j(a)})}),$(document).on("click",".filtroAdicional",function(){$.get("/produtos/filtroAdicional/"+$(this).attr("name")).done(function(a){j(a)})}),$(document.body).on("click",".mostrarMais",function(){var a=$(this).attr("id");a++,$.get("/produtos/mostrarmais/"+a).done(function(b){var a;a=b,$("#mostrarMais").remove(),$("#hrMostrarMais").remove(),a[1].length>0&&(html=i(a),a[1][0].length==a[0].REGISTROS_POR_CONSULTA&&(html+='<hr id="hrMostrarMais">',html+='<div class="row" id="mostrarMais">',html+='<div class="col-xs-12 col-sm-6 offset-sm-3">',html+='<button class="mostrarMais btn btn-block btn'+a[0].PESQ_CLASS+'" id="'+a[0].PAGINA+'" >Ver Mais</a>',html+="</div>",html+="</div>")),$("#pesquisaProduto").append(html),f(),$body.removeClass("loading"),d()})}),$(document).on("click",".alterarTamanho",function(){$("#ID_PROD").val($(this).val()),$("#labelTamanho").html("Tamanho: "+$(this).html())}),$(".dropdown-menu a.dropdown-toggle").on("click",function(a){return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(a){$(".dropdown-submenu .show").removeClass("show")}),!1}),d(),a=$(".LoadCor"),$(a).each(function(e,a){var b=$(a).find("img"),c=b.attr("id").substring(3),d=$(a).find(".spinner-grow");""!=c&&function(a,c,d){if(""!=a){var b=$.get("/cor/imagem/"+a);b.done(function(a){d.remove(),""!=a?c.attr("src",a):c.attr("src","/img/notfound.jpg")}),b.fail(function(a){d.remove(),c.attr("src","/img/notfound.jpg")})}}(c,b,d)}),e(),b=$(".LoadImageNormal"),$(b).each(function(d,c){var a=$(c).find("img"),b=a.attr("id");""!=b&&k(b,a)}),$(document).on("click",".imagegaleriaclick",function(){var a=$("#previewGaleria").find("img"),b=$(this).find("img").attr("id");k(b,a)}),$(document).on("click",".imagePreviewClick",function(){$("#galeriaModal").modal("show"),$(".galeriaModal").slick("slickGoTo",0)}),$(document).on("click",".listadesejos",function(){let a=$(this);a.hasClass("mdi-heart-outline")?$.get("/listadesejos/add/"+a.val()).done(function(b){a.removeClass("mdi-heart-outline"),a.addClass("mdi-heart")}):$.get("/listadesejos/deljq/"+a.val()).done(function(b){a.removeClass("mdi-heart"),a.addClass("mdi-heart-outline")})}),$(".alteraQuantidade").on("change",function(){$(this).removeClass("is-invalid")}),$(document).on("submit",".excluirItemCesta",function(a){id=$(this).attr("id"),$.get("/cesta/excluirdados/"+id).done(function(a){1==$("#analytics_OK").length&&gtag("event","remove_from_cart",{items:[{id:a.ID_PROD,name:a.DESCRICAO,list_name:"Pesquisa",brand:a.FABRICANTE,category:a.SETOR,variant:"",list_position:1,quantity:a.QUANTIDADE,price:a.UNITARIO}]})})}),$(document.body).on("click",".enviarcesta, .itemenviarcesta",function(){var a=$(this).attr("id").substring(2),b=$("#"+a),d=parseInt(b.val()),e=parseInt($("#altqtd"+a).attr("max")),c=!0;if($("#altqtd"+a).length>=1&&d>e&&($("#altqtd"+a).addClass("is-invalid"),c=!1),c){var f=b.hasClass("comprar"),g=b.hasClass("itemcomprar");$.post("/cesta/adicionar",{id:a,qtde:b.val()}).done(function(a){if(1==$("#analytics_OK").length&&gtag("event","add_to_cart",{items:[{id:a.ID_PROD,name:a.DESCRICAO,list_name:"Pesquisa",brand:a.FABRICANTE,category:a.SETOR,variant:"",list_position:1,quantity:a.QUANTIDADE,price:a.UNITARIO}]}),(f||g)&&(b.removeClass("btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_COMPRAR).addClass("btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_ADICIONADO),1==a.EXIB_COMBO_QTDE?($("#grpComprar"+b.attr("id")).removeClass("btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_COMPRAR).addClass("btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_ADICIONADO),$("#"+b.attr("id")).removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+a.CHECKOUT_ICON_CLASS+'"></span>'),$("#"+b.attr("id")).removeClass("btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_COMPRAR).addClass("btn"+a.BUTTON_CLASS+a.PESQ_BUTTON_ADICIONADO),b.removeClass("itemcomprar").addClass("adicionado")):b.removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+a.CHECKOUT_ICON_CLASS+'"></span>')),a.ITENS>0?$("#totalitens").text(a.ITENS):$("#totalitens").text(""),1==a.REDIREC_COMPRA)$(location).attr("href","/cesta/resumo");else{if($("#cesta"+a.ITEM.ID_PROD).length>=1){var c='<div class="col-2"><img class="card-img-top"  src="/img/lojas/'+a.LOJA+"/produtos/mini/"+a.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+a.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+a.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+(1===a.EXIB_VALOR_APENAS_USUARIO&&1==a.BLOQUEADO?"Indispon\xedvel":a.item.UNITARIO)+"</label></div><hr>";$("#cesta"+a.ITEM.ID_PROD).html(c)}else{var c='<div id="cesta'+a.ITEM.ID_PROD+'" class="row"><div class="col-2"><img class="card-img-top"  src="/img/lojas/'+a.LOJA+"/produtos/mini/"+a.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+a.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+a.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+(1===a.EXIB_VALOR_APENAS_USUARIO&&1==a.BLOQUEADO?"Indispon\xedvel":a.ITEM.UNITARIO)+"</label></div></div><hr>";$("#modalItens").append(c)}$("#cestaTotal").html("<strong>Total R$ "+(1===a.EXIB_VALOR_APENAS_USUARIO&&1==a.BLOQUEADO?"Indispon\xedvel":a.TOTAL)+"</strong>"),$("#modalContinuarComprando").modal("show")}})}}),$(document.body).on("click",".confirmQtdeCard, .confirmQtdFrac",function(){var c=!0;if($(this).hasClass("confirmQtdFrac"))var a=$("#qtdfrac"+$(this).val()),d=$(this).val(),b=parseInt(a.val()),e=parseInt(a.attr("max")),f=a.hasClass("comprar"),g=a.hasClass("itemcomprar");else{var a=$("#"+$("#idQtdeCard").val()),d=a.attr("id"),b=parseInt($("#qtdeCard").val()),e=parseInt($("#altqtd"+$("#idQtdeCard").val()).attr("max")),f=a.hasClass("comprar"),g=a.hasClass("itemcomprar");$("#digQtdeCard").modal("hide"),$("#altqtd"+a.attr("id")).length>=1&&b>e&&($("#altqtd"+a.attr("id")).addClass("is-invalid"),c=!1)}c&&$.post("/cesta/adicionar",{id:d,qtde:b}).done(function(b){if(1==$("#analytics_OK").length&&gtag("event","add_to_cart",{items:[{id:b.ID_PROD,name:b.DESCRICAO,list_name:"Pesquisa",brand:b.FABRICANTE,category:b.SETOR,variant:"",list_position:1,quantity:b.QUANTIDADE,price:b.UNITARIO}]}),(f||g)&&(a.removeClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR).addClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_ADICIONADO),1==b.EXIB_COMBO_QTDE?($("#grpComprar"+d).removeClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR).addClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_ADICIONADO),$("#"+d).removeClass("comprar").addClass("adicionado").html('Adicionado  <span class="mdi mdi-'+b.CHECKOUT_ICON_CLASS+'"></span>'),$("#"+d).removeClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR).addClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_ADICIONADO),a.removeClass("itemcomprar").addClass("adicionado")):a.removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+b.CHECKOUT_ICON_CLASS+'"></span>')),b.ITENS>0?$("#totalitens").text(b.ITENS):$("#totalitens").text(""),1==b.REDIREC_COMPRA)$(location).attr("href","/cesta/resumo");else{if($("#cesta"+b.ITEM.ID_PROD).length>=1){var c='<div class="col-2"><img class="card-img-top"  src="/img/lojas/'+b.LOJA+"/produtos/mini/"+b.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+b.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+b.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+(1===b.EXIB_VALOR_APENAS_USUARIO&&1==b.BLOQUEADO?"Indispon\xedvel":b.item.UNITARIO)+"</label></div><hr>";$("#cesta"+b.ITEM.ID_PROD).html(c)}else{var c='<div id="cesta'+b.ITEM.ID_PROD+'" class="row"><div class="col-2"><img class="card-img-top"  src="/img/lojas/'+b.LOJA+"/produtos/mini/"+b.ITEM.ID_IMG+'.jpg"></div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+b.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+b.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+(1===b.EXIB_VALOR_APENAS_USUARIO&&1==b.BLOQUEADO?"Indispon\xedvel":b.ITEM.UNITARIO)+"</label></div></div><hr>";$("#modalItens").append(c)}$("#cestaTotal").html("<strong>Total R$ "+(1===b.EXIB_VALOR_APENAS_USUARIO&&1==b.BLOQUEADO?"Indispon\xedvel":b.TOTAL)+"</strong>"),$("#modalContinuarComprando").modal("show")}})}),$(document.body).on("click",".comprar, .itemcomprar",function(){var a=$(this);if(1==$("#configQtdeCard").val())$("#idQtdeCard").val(a.attr("id")),$("#qtdeCard").val("1"),$("#digQtdeCard").modal("show");else{var c=parseInt(a.val()),d=parseInt($("#altqtd"+a.attr("id")).attr("max")),e=a.hasClass("comprar"),f=a.hasClass("itemcomprar"),b=!0;$("#altqtd"+a.attr("id")).length>=1&&c>d&&($("#altqtd"+a.attr("id")).addClass("is-invalid"),b=!1),b&&$.post("/cesta/adicionar",{id:a.attr("id"),qtde:a.val()}).done(function(b){if(1==$("#analytics_OK").length&&gtag("event","add_to_cart",{items:[{id:b.ID_PROD,name:b.DESCRICAO,list_name:"Pesquisa",brand:b.FABRICANTE,category:b.SETOR,variant:"",list_position:1,quantity:b.QUANTIDADE,price:b.UNITARIO}]}),(e||f)&&(a.removeClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR).addClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_ADICIONADO),1==b.EXIB_COMBO_QTDE?($("#grpComprar"+a.attr("id")).removeClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR).addClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_ADICIONADO),$("#"+a.attr("id")).removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+b.CHECKOUT_ICON_CLASS+'"></span>'),$("#"+a.attr("id")).removeClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_COMPRAR).addClass("btn"+b.BUTTON_CLASS+b.PESQ_BUTTON_ADICIONADO),a.removeClass("itemcomprar").addClass("adicionado")):a.removeClass("comprar").addClass("adicionado").html('Adicionado <span class="mdi mdi-'+b.CHECKOUT_ICON_CLASS+'"></span>')),b.ITENS>0?$("#totalitens").text(b.ITENS):$("#totalitens").text(""),1==b.CATALOGO);else if(1==b.REDIREC_COMPRA)$(location).attr("href","/cesta/resumo");else if($("#cestaTotal").html("<strong>Total R$ "+(1===b.EXIB_VALOR_APENAS_USUARIO&&1==b.BLOQUEADO?"Indispon\xedvel":b.TOTAL)+"</strong>"),2==b.REDIREC_COMPRA){if($("#cesta"+b.ITEM.ID_PROD).length>=1){var c='<div class="col-2">';1==b.PESQ_TIPO_IMAGEM?c+='<img class="card-img-top"  src="/img/lojas/'+b.LOJA+"/produtos/mini/"+b.ITEM.ID_IMG+'.jpg">':c+='<img class="card-img-top"  src="/img/lojas/'+b.LOJA+"/produtos/normal/"+b.ITEM.ID_IMG+'.jpg">',c+='</div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+b.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+b.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+(1===b.EXIB_VALOR_APENAS_USUARIO&&1==b.BLOQUEADO?"Indispon\xedvel":b.item.UNITARIO)+"</label></div><hr>",$("#cesta"+b.ITEM.ID_PROD).html(c)}else{var c='<div id="cesta'+b.ITEM.ID_PROD+'" class="row"><div class="col-2">';1==b.PESQ_TIPO_IMAGEM?c+='<img class="card-img-top"  src="/img/lojas/'+b.LOJA+"/produtos/mini/"+b.ITEM.ID_IMG+'.jpg">':c+='<img class="card-img-top"  src="/img/lojas/'+b.LOJA+"/produtos/normal/"+b.ITEM.ID_IMG+'.jpg">',c+='</div><div class="col-6"><label class="col-form-label"><span style="text-transform: capitalize">'+b.ITEM.DESCRICAO+'</span></label></div><div class="col-2 text-right"><label class="col-form-label">'+b.ITEM.QUANTIDADE+'</label></div><div class="col-2 text-right"><label class="col-form-label">'+(1===b.EXIB_VALOR_APENAS_USUARIO&&1==b.BLOQUEADO?"Indispon\xedvel":b.ITEM.UNITARIO)+"</label></div></div><hr>",$("#modalItens").append(c)}$("#modalContinuarComprando").modal("show")}})}}),$("#cep").keydown(function(a){$("#cep").popover("hide"),-1===$.inArray(a.key,["Enter","Backspace","Tab","1","2","3","4","5","6","7","8","9","0"])?a.preventDefault():9==$("#cep").val().length&& -1===$.inArray(a.key,["Enter","Backspace"])&&a.preventDefault()}),$("#cep").keyup(function(a){8!=a.which&&5==$("#cep").val().length&&$("#cep").val($("#cep").val()+"-")}),$(document).on("submit","#definirCep",function(){9!=$("#cep").val().length&&($("#cep").popover("show"),event.preventDefault())}),$(document).on("click",".opcaofrete",function(){var a=$(this).find(".frete-selecionado").val(),b=$(this).find(".frete-selecionado").attr("id"),c=$(this).find(".frete-descricao").val();$.post("/cesta/definefrete",{id:b,valor:a}).done(function(a){1==$("#analytics_OK").length&&gtag("event","set_checkout_option",{checkout_step:1,checkout_option:"Op\xe7\xe3o de Entrega",value:c}),$("#subtotal").html("<strong>"+a.SUBTOTAL+"</strong>"),$("#frete").text(a.FRETE),$("#valfrete").val(a.VALORFRETE),$("#total").html("<strong>"+a.TOTAL+"</strong>"),"0,00"==a.SUBTOTAL&&($(".expirada").removeClass("d-none"),$("#valprodutos").val("0"),$("#valdesconto").val("0")),$("#CART_PARCELAS").length>0&&$("#CART_PARCELAS").html(""),$("#BOL_PARCELAS").length>0&&$("#BOL_PARCELAS").html(""),n(a.PAGAMENTO,a.VALTOTAL)})}),$(document.body).on("click",".incQtde",function(){var a=$(this);$.post("/cesta/incrementa",{id:a.val(),qtd:1}).done(function(b){""!=b&&(o(a,b),l(b.ENTREGA,b.ID_FRETE))})}),$(document.body).on("click",".decQtde",function(){var a=$(this);"1"!=$("#qtd"+a.val()).text()&&$.post("/cesta/decrementa",{id:a.val(),qtd:1}).done(function(b){""!=b&&(o(a,b),l(b.ENTREGA,b.ID_FRETE))})}),$body=$("body"),window.addEventListener("pageshow",function(a){(a.persisted|| void 0!==window.performance&&2===window.performance.navigation.type)&&window.location.reload()}),$(document).on("mouseenter",".destacaborda",function(){1==$("#ocultarBtComprar").val()&&$(this).children(".divbtComprar").removeClass("invisible")}),$(document).on("mouseleave",".destacaborda",function(){1==$("#ocultarBtComprar").val()&&$(this).children(".divbtComprar").addClass("invisible")}),$(document).on("change",".alteraQuantidade",function(){var a=$(this).val();$("#ec"+$(this).attr("name")).length>=1&&$("#ec"+$(this).attr("name")).val(a),$("#"+$(this).attr("name")).val(a)}),$(document).on("click",".btnPrintCatalogo",function(){window.print()}),$(document).on("submit",".cotacaoEmail",function(b){b.preventDefault();var a=$(this).serializeArray();return $.get("/emails/CotacaoEmail",{emailCotacao:a[2].value,textoCotacao:a[3].value}).done(function(a){}).fail(function(){}),!1}),$(document).on("click","#btSendNewsLetterInsert",function(a){a.preventDefault();var b=$("#sendNewsLetterInsert").serializeArray();$.post("/newsletter/inclusao",b).done(function(a){alert("Obrigado por se cadastrar!")})}),(c=$("#rodape").height())>390&&$("#conteudo").css("padding-bottom",c),1==$("#sliderRelacionados").length&&$.get("/produtos/relacionados/"+$("#ID_PROD").val()).done(function(a){if(a[1][0].length>0){$("#produtosRelacionados").html(a[0].DET_RELAC),html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#sliderRelacionados").html(html),$(".relacionados").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}}),1==$("#sliderDestaques").length&&$.get("/produtos/destaques/"+$("#ID_PROD").val()).done(function(a){if(a[1][0].length>0){$("#produtosDestaques").html(a[0].DET_DEST),html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#sliderDestaques").html(html),$(".destaques").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}}),f(),function(){if(1==$("#descricaodetalhada").length){var a=$.get("/produtos/descricaodetalhada/"+$("#ID_PROD").val());a.done(function(a){$("#descricaodetalhada").html(a)}),a.fail(function(a){$("#descricaodetalhada").html("")})}}(),function(){if(1==$("#informacaocomplementar").length){var a=$.get("/produtos/informacaocomplementar/"+$("#ID_PROD").val());a.done(function(a){$("#informacaocomplementar").html(a)}),a.fail(function(a){$("#informacaocomplementar").html("")})}}(),function(){if(1==$("#sliderVitrine").length){var a=$.get("/vitrine");a.done(function(a){html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#spinnerVitrine").remove(),$("#sliderVitrine").html(html),$(".vitrine").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}),a.fail(function(){$("#spinnerVitrine").remove()})}}(),function(){if(1==$("#sliderMaisVendidos").length){var a=$.get("/maisVendidos");a.done(function(a){html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#spinnerMaisVendidos").remove(),$("#sliderMaisVendidos").html(html),$(".maisvendidos").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}),a.fail(function(){$("#spinnerMaisVendidos").remove()})}}(),function(){if(1==$("#sliderPatrocinados").length){var a=$.get("/patrocinados");a.done(function(a){html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#spinnerPatrocinados").remove(),$("#sliderPatrocinados").html(html),$(".patrocinados").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}),a.fail(function(){$("#spinnerPatrocinados").remove()})}}(),function(){if(1==$("#sliderMaisVendidosCategoria").length){var a=$.get("/produtos/maisvendidos/"+$("#ID_SET").val());a.done(function(a){if(a[1][0].length>0){$("#produtosmaisvendidos").html(a[0].DET_MAIS),html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#spinnerMaisVendidos").remove(),$("#sliderMaisVendidosCategoria").html(html),$(".maisvendidos").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}else $("#spinnerMaisVendidos").remove(),$("#sliderMaisVendidos").html("")}),a.fail(function(){$("#spinnerMaisVendidos").remove()})}}(),function(){if(1==$("#sliderPatrocinadosCategoria").length){var a=$.get("/produtos/patrocinados/"+$("#ID_SET").val());a.done(function(a){if(a[1][0].length>0){$("#produtospatrocinados").html(a[0].DET_PATROC),html="";for(var b=0;b<a[1][0].length;b++)html+='<div class="destacabordaVitrine">',html+=h(a[0],a[1][0][b]),html+=" </div>";$("#spinnerPatrocinados").remove(),$("#sliderPatrocinadosCategoria").html(html),$(".patrocinados").slick({prevArrow:'<button class="slick-prev slick-arrow"></button>',nextArrow:'<button class="slick-next slick-arrow"></button>',dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:2,responsive:[{breakpoint:991,settings:{infinite:!0,dots:!0,slidesToShow:4,slidesToScroll:2}},{breakpoint:767,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}},{breakpoint:575,settings:{arrows:!1,slidesToShow:2,slidesToScroll:2}}]}),$body.removeClass("loading"),d(),e()}else $("#spinnerPatrocinados").remove(),$("#sliderPatrocinados").html("")}),a.fail(function(){$("#spinnerPatrocinados").remove()})}}(),$(document).on({ajaxStart:function(){$body.addClass("loading")},ajaxStop:function(){$body.removeClass("loading")}})})