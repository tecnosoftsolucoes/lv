$((function(){function soNumeros(str){return str.replace(/[^\d]+/g,"")}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),window.matchMedia("(min-width: 760px)").matches||$("#navbarDepartamentos").removeClass("btn-group").addClass("btn-group-vertical"),$(document).on("click","#btn-fechar-compra",(function(){var bairroMaxLength=document.getElementById("bairro").maxLength,bairroDigitado;if(parseInt($("#bairro").val().length)>bairroMaxLength)return $("#bairro").attr("title","Máximo permitido 30 caracteres"),$("#bairro").tooltip("show"),!1;var enderecoMaxLength=document.getElementById("endereco").maxLength,enderecoDigitado;return!(parseInt($("#endereco").val().length)>enderecoMaxLength)||($("#endereco").attr("title","Máximo permitido 60 caracteres"),$("#endereco").tooltip("show"),!1)})),$(document).on("change","#cbIsento",(function(){console.log($(this)),$(this).is(":checked")?($("#docum2").val("ISENTO"),$("#docum2").attr("disabled",!0)):($("#docum2").val(""),$("#docum2").attr("disabled",!1))})),$(document).on("change","#docum1",(function(){14==soNumeros($(this).val()).length?($("#docum2").attr("required",!0),$("#docum2").attr("disabled",!1)):($("#docum2").attr("required",!1),$("#docum2").attr("disabled",!0))})),$(".is-invalid").on("change",(function(){$(this).val().length>0?$(this).addClass("is-valid").removeClass("is-invalid"):$(this).addClass("is-invalid").removeClass("is-valid")})),$(".is-valid").on("change",(function(){$(this).val().length>0?$(this).addClass("is-valid").removeClass("is-invalid"):$(this).addClass("is-invalid").removeClass("is-valid")})),$(document).on("keydown","#cepcad",(function(event){$("#cepcad").popover("hide");var arrNumeros=["Enter","Backspace","Tab","1","2","3","4","5","6","7","8","9","0"];-1===$.inArray(event.key,arrNumeros)?event.preventDefault():9==$("#cepcad").val().length&&-1===$.inArray(event.key,["Enter","Backspace","Tab"])&&event.preventDefault()})),$(document).on("change","#cepcad",(function(event){if(""==$("#endereco").val()&&9==$("#cepcad").val().length){var cep=soNumeros($(this).val());""!=cep&&$.getJSON("https://viacep.com.br/ws/"+cep+"/json/?callback=?",(function(dados){"erro"in dados?($("#cidade").attr("readonly",!1),$("#estado").attr("readonly",!1),$("#cepcad").addClass("is-invalid").removeClass("is-valid"),$("#cepcad").popover("show")):($("#errorCep").html("").removeClass("invalid-feedback d-block"),$("#cepcad").addClass("is-valid").removeClass("is-invalid"),$("#endereco").val(dados.logradouro),""!=dados.logradouro?$("#endereco").addClass("is-valid").removeClass("is-invalid"):$("#endereco").addClass("is-invalid").removeClass("is-valid"),$("#bairro").val(dados.bairro),""!=dados.bairro?$("#bairro").addClass("is-valid").removeClass("is-invalid"):$("#bairro").addClass("is-invalid").removeClass("is-valid"),$("#cidade").val(dados.localidade),""!=dados.localidade?($("#cidade").attr("readonly",!0),$("#cidade").addClass("is-valid").removeClass("is-invalid")):$("#cidade").addClass("is-invalid").removeClass("is-valid"),$("#estado").val(dados.uf),""!=dados.uf?($("#estado").attr("readonly",!0),$("#estado").addClass("is-valid").removeClass("is-invalid")):$("#estado").addClass("is-invalid").removeClass("is-valid"),$("#complemento").val(dados.complemento),$("#ibge").val(dados.ibge),$("#numero").val(""),0===$("#endereco").val().length?$("#endereco").focus():(""!=$("#numero").val()?$("#numero").addClass("is-valid").removeClass("is-invalid"):$("#numero").addClass("is-invalid").removeClass("is-valid"),$("#numero").focus()))}))}})),$(document).on("keyup","#cepcad",(function(event){if(8!=event.which)if(5==$("#cepcad").val().length)$("#cepcad").val($("#cepcad").val()+"-");else if(9==$("#cepcad").val().length){var cep=$(this).val().replace("-","");""!=cep&&$.getJSON("https://viacep.com.br/ws/"+cep+"/json/?callback=?",(function(dados){"erro"in dados?($("#cidade").attr("readonly",!1),$("#estado").attr("readonly",!1),$("#cepcad").addClass("is-invalid").removeClass("is-valid"),$("#errorCep").html("Cep inválido!").addClass("invalid-feedback d-block")):($("#errorCep").html("").removeClass("invalid-feedback d-block"),$("#cepcad").addClass("is-valid").removeClass("is-invalid"),$("#endereco").val(dados.logradouro),""!=dados.logradouro?$("#endereco").addClass("is-valid").removeClass("is-invalid"):$("#endereco").addClass("is-invalid").removeClass("is-valid"),$("#bairro").val(dados.bairro),""!=dados.bairro?$("#bairro").addClass("is-valid").removeClass("is-invalid"):$("#bairro").addClass("is-invalid").removeClass("is-valid"),$("#cidade").val(dados.localidade),""!=dados.localidade?($("#cidade").attr("readonly",!0),$("#cidade").addClass("is-valid").removeClass("is-invalid")):$("#cidade").addClass("is-invalid").removeClass("is-valid"),$("#estado").val(dados.uf),""!=dados.uf?($("#estado").attr("readonly",!0),$("#estado").addClass("is-valid").removeClass("is-invalid")):$("#estado").addClass("is-invalid").removeClass("is-valid"),$("#complemento").val(dados.complemento),$("#ibge").val(dados.ibge),$("#numero").val(""),0===$("#endereco").val().length?$("#endereco").focus():(""!=$("#numero").val()?$("#numero").addClass("is-valid").removeClass("is-invalid"):$("#numero").addClass("is-invalid").removeClass("is-valid"),$("#numero").focus()))}))}}))}));