$(function(){function a(a){return a.replace(/[^\d]+/g,"")}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),window.matchMedia("(min-width: 760px)").matches||$("#navbarDepartamentos").removeClass("btn-group").addClass("btn-group-vertical"),$(document).on("click","#btn-fechar-compra",function(){var a=document.getElementById("bairro").maxLength;if(parseInt($("#bairro").val().length)>a)return $("#bairro").attr("title","M\xe1ximo permitido 30 caracteres"),$("#bairro").tooltip("show"),!1;var e=document.getElementById("endereco").maxLength;return!(parseInt($("#endereco").val().length)>e)||($("#endereco").attr("title","M\xe1ximo permitido 60 caracteres"),$("#endereco").tooltip("show"),!1)}),$(document).on("change","#cbIsento",function(){console.log($(this)),$(this).is(":checked")?($("#docum2").val("ISENTO"),$("#docum2").attr("disabled",!0)):($("#docum2").val(""),$("#docum2").attr("disabled",!1))}),$(document).on("change","#docum1",function(){14==a($(this).val()).length?($("#docum2").attr("required",!0),$("#docum2").attr("disabled",!1)):($("#docum2").attr("required",!1),$("#docum2").attr("disabled",!0))}),$(".is-invalid").on("change",function(){$(this).val().length>0?$(this).addClass("is-valid").removeClass("is-invalid"):$(this).addClass("is-invalid").removeClass("is-valid")}),$(".is-valid").on("change",function(){$(this).val().length>0?$(this).addClass("is-valid").removeClass("is-invalid"):$(this).addClass("is-invalid").removeClass("is-valid")}),$(document).on("keydown","#cepcad",function(a){$("#cepcad").popover("hide"),-1===$.inArray(a.key,["Enter","Backspace","Tab","1","2","3","4","5","6","7","8","9","0"])?a.preventDefault():9==$("#cepcad").val().length&&-1===$.inArray(a.key,["Enter","Backspace","Tab"])&&a.preventDefault()}),$(document).on("change","#cepcad",function(e){if(""==$("#endereco").val()&&9==$("#cepcad").val().length){var i=a($(this).val());""!=i&&$.getJSON("https://viacep.com.br/ws/"+i+"/json/?callback=?",function(a){"erro"in a?($("#cidade").attr("readonly",!1),$("#estado").attr("readonly",!1),$("#cepcad").addClass("is-invalid").removeClass("is-valid"),$("#cepcad").popover("show")):($("#errorCep").html("").removeClass("invalid-feedback d-block"),$("#cepcad").addClass("is-valid").removeClass("is-invalid"),$("#endereco").val(a.logradouro),""!=a.logradouro?(console.log("teste"),$("#endereco").addClass("is-valid").removeClass("is-invalid")):$("#endereco").addClass("is-invalid").removeClass("is-valid"),$("#bairro").val(a.bairro),""!=a.bairro?$("#bairro").addClass("is-valid").removeClass("is-invalid"):$("#bairro").addClass("is-invalid").removeClass("is-valid"),$("#cidade").val(a.localidade),""!=a.localidade?($("#cidade").attr("readonly",!0),$("#cidade").addClass("is-valid").removeClass("is-invalid")):$("#cidade").addClass("is-invalid").removeClass("is-valid"),$("#estado").val(a.uf),""!=a.uf?($("#estado").attr("readonly",!0),$("#estado").addClass("is-valid").removeClass("is-invalid")):$("#estado").addClass("is-invalid").removeClass("is-valid"),$("#complemento").val(a.complemento),$("#ibge").val(a.ibge),$("#numero").val(""),0===$("#endereco").val().length?$("#endereco").focus():(""!=$("#numero").val()?$("#numero").addClass("is-valid").removeClass("is-invalid"):$("#numero").addClass("is-invalid").removeClass("is-valid"),$("#numero").focus()))})}}),$(document).on("keyup","#cepcad",function(a){if(8!=a.which){if(5==$("#cepcad").val().length)$("#cepcad").val($("#cepcad").val()+"-");else if(9==$("#cepcad").val().length){var e=$(this).val().replace("-","");""!=e&&$.getJSON("https://viacep.com.br/ws/"+e+"/json/?callback=?",function(a){"erro"in a?($("#cidade").attr("readonly",!1),$("#estado").attr("readonly",!1),$("#cepcad").addClass("is-invalid").removeClass("is-valid"),$("#errorCep").html("Cep inv\xe1lido!").addClass("invalid-feedback d-block")):($("#errorCep").html("").removeClass("invalid-feedback d-block"),$("#cepcad").addClass("is-valid").removeClass("is-invalid"),$("#endereco").val(a.logradouro),""!=a.logradouro?$("#endereco").addClass("is-valid").removeClass("is-invalid"):$("#endereco").addClass("is-invalid").removeClass("is-valid"),$("#bairro").val(a.bairro),""!=a.bairro?$("#bairro").addClass("is-valid").removeClass("is-invalid"):$("#bairro").addClass("is-invalid").removeClass("is-valid"),$("#cidade").val(a.localidade),""!=a.localidade?($("#cidade").attr("readonly",!0),$("#cidade").addClass("is-valid").removeClass("is-invalid")):$("#cidade").addClass("is-invalid").removeClass("is-valid"),$("#estado").val(a.uf),""!=a.uf?($("#estado").attr("readonly",!0),$("#estado").addClass("is-valid").removeClass("is-invalid")):$("#estado").addClass("is-invalid").removeClass("is-valid"),$("#complemento").val(a.complemento),$("#ibge").val(a.ibge),$("#numero").val(""),0===$("#endereco").val().length?$("#endereco").focus():(""!=$("#numero").val()?$("#numero").addClass("is-valid").removeClass("is-invalid"):$("#numero").addClass("is-invalid").removeClass("is-valid"),$("#numero").focus()))})}}})});